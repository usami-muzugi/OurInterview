# 使用用户自定义类加载器来加载类型

下列步骤描述使用用户自定义类加载器 L 来加载标记为 N 的类或接口，然后创建这个非数组类型的类或接口 C。
首先， Java 虚拟机检查 L 是否为已经加载过的标识为 N 的类或接口的初始加载器。如果是的话，那个类或接口就是 C，不用再创建其它类了。
否则 Java 虚拟机会调用 L 的 loadClass(N)①方法。 这次调用的返回值就是创建好的类或接口 C。 Java 虚拟机会记录下 L 是 C 的初始加载器（ §5.3.4）。这节其余的部分会更详细地描述这个过程。

当通过类或接口 C 的名称 N 为参数去调用类加载器 L 的 loadClass 方法， L 必须执行下面两种操作之一来加载 C：

1. 类加载器 L 可以创建一个如 ClassFile 结构（ §4.1）的字节数组用来表示 C；然后必须调用 ClassLoader 的 defineClass 方法。调用 defineClass 方法会让 Java 虚拟机使用5.3.5 节所描述的算法通过 L 由字节数组得到标记为 N 的类或接口。
2. 类加载器 L 可能将对 C 的加载委托给其它的类加载器 L'。这是通过直接或间接的方式传递参数 N 来调用 L'的方法（也就是 loadClass 方法）。这次调用会产生 C。


不管第 1 步或第 2 步中，如果类加载器 L 因为任何原因不能加载标识为 N 的类或接口，它必须抛出 ClassNotFoundException 异常。 